<?xml version="1.0"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" version="1.1" width="512" height="512" x="0" y="0" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve"><g><g xmlns="http://www.w3.org/2000/svg"><path d="m309.349 505.055h-277.09c-8.873 0-16.952-3.629-22.792-9.468-5.838-5.84-9.467-13.891-9.467-22.763v-433.62c0-8.873 3.629-16.951 9.468-22.792 5.84-5.839 13.919-9.467 22.792-9.467h326.158c8.872 0 16.923 3.628 22.79 9.467 5.841 5.841 9.44 13.919 9.44 22.792v236.837h96.039c6.973 0 13.322 2.835 17.915 7.427 4.563 4.593 7.398 10.914 7.398 17.915 0 6.945-2.807 13.238-7.37 17.83 4.563 4.593 7.37 10.886 7.37 17.83 0 7.115-2.92 13.805-8.136 18.624 4.11 4.507 6.605 10.488 6.605 17.065 0 6.944-2.806 13.237-7.37 17.829 4.564 4.565 7.37 10.886 7.37 17.831 0 6.944-2.806 13.237-7.342 17.829 4.536 4.564 7.342 10.886 7.342 17.83 0 6.945-2.806 13.267-7.37 17.831 4.564 4.592 7.37 10.885 7.37 17.83 0 7.001-2.834 13.352-7.427 17.915-4.875 4.875-11.055 7.342-17.915 7.427h-175.778zm17.971-311.447c-9.468 0-18-3.827-24.208-10.035-6.179-6.18-10.007-14.74-10.007-24.18 0-9.467 3.828-18.028 10.007-24.208 6.208-6.208 14.74-10.034 24.208-10.034 9.439 0 18 3.826 24.208 10.034 6.18 6.18 10.007 14.741 10.007 24.208 0 9.439-3.827 18-10.007 24.18-6.208 6.208-14.768 10.035-24.208 10.035zm-13.606-20.636c3.487 3.487 8.306 5.642 13.606 5.642 5.301 0 10.12-2.154 13.578-5.642 3.487-3.486 5.642-8.277 5.642-13.578 0-5.329-2.154-10.119-5.642-13.607-3.458-3.486-8.277-5.641-13.578-5.641s-10.119 2.154-13.606 5.641c-3.458 3.487-5.612 8.277-5.612 13.607 0 5.3 2.154 10.091 5.612 13.578zm-250.359 5.641c5.301 0 10.12-2.154 13.578-5.642 3.486-3.486 5.641-8.277 5.641-13.578 0-5.329-2.154-10.119-5.641-13.607-3.459-3.486-8.277-5.641-13.578-5.641-5.33 0-10.12 2.154-13.607 5.641-3.458 3.487-5.612 8.277-5.612 13.607 0 5.301 2.154 10.092 5.612 13.578 3.487 3.488 8.278 5.642 13.607 5.642zm24.18 4.96c-6.18 6.208-14.74 10.035-24.18 10.035-9.468 0-18-3.827-24.208-10.035-6.179-6.18-10.034-14.74-10.034-24.18 0-9.467 3.855-18.028 10.034-24.208 6.208-6.208 14.74-10.034 24.208-10.034 9.439 0 18 3.826 24.18 10.034 6.208 6.18 10.035 14.741 10.035 24.208 0 9.44-3.827 18.001-10.035 24.18zm399.151 128.128c2.807 0 5.329-.992 7.314-3.005 1.843-1.843 3.005-4.45 3.005-7.313s-1.162-5.442-3.033-7.314c-1.871-1.871-4.451-3.033-7.285-3.033-58.622 0-117.215 0-175.807 0-7.738 0-14.77 3.175-19.9 8.277-5.102 5.131-8.277 12.161-8.277 19.899 0 7.739 3.175 14.769 8.277 19.899 5.131 5.103 12.162 8.277 19.9 8.277h175.807c2.834 0 5.414-1.162 7.285-3.033s3.033-4.45 3.033-7.313c0-2.862-1.162-5.471-3.005-7.314-1.984-2.013-4.507-3.004-7.314-3.004h-159.536c-4.139 0-7.512-3.374-7.512-7.513s3.373-7.512 7.512-7.512h159.536zm-1.531 71.349c.171 0 .341 0 .511.028 2.636-.142 5.018-1.275 6.774-3.033 1.871-1.87 3.033-4.45 3.033-7.313s-1.162-5.443-3.033-7.313c-1.871-1.871-4.422-3.034-7.256-3.034-58.622 0-117.243 0-175.836 0-7.738 0-14.798 3.176-19.899 8.278-5.102 5.102-8.277 12.16-8.277 19.898 0 7.739 3.175 14.769 8.277 19.872 5.102 5.13 12.161 8.276 19.899 8.276h175.778c2.863 0 5.442-1.134 7.313-3.004 1.871-1.871 3.033-4.479 3.033-7.313 0-2.892-1.162-5.472-3.033-7.343-1.757-1.757-4.139-2.891-6.774-3.005-.17 0-.34 0-.511 0h-159.534c-4.139 0-7.512-3.345-7.512-7.483 0-4.139 3.373-7.512 7.512-7.512h159.535zm0 71.349c2.807 0 5.301-1.021 7.285-3.005 1.871-1.871 3.033-4.479 3.033-7.343 0-2.862-1.162-5.442-3.033-7.313-1.871-1.87-4.45-3.004-7.313-3.004h-175.778c-7.738 0-14.798 3.146-19.899 8.276-5.102 5.103-8.277 12.133-8.277 19.872 0 7.738 3.175 14.797 8.277 19.899s12.161 8.276 19.899 8.276h175.778c2.863 0 5.442-1.162 7.313-3.033 1.871-1.87 3.033-4.45 3.033-7.313s-1.162-5.443-3.033-7.313c-1.984-1.984-4.478-3.005-7.285-3.005h-159.535c-4.139 0-7.512-3.373-7.512-7.512s3.373-7.483 7.512-7.483h159.535zm-109.504-178.358v-165.007h-360.655v361.79c0 4.734 1.956 9.043 5.074 12.161 3.147 3.118 7.456 5.073 12.19 5.073h244.434c-6.549-7.568-10.517-17.433-10.517-28.176 0-11.877 4.847-22.678 12.671-30.474 1.898-1.927 3.996-3.656 6.236-5.188-2.24-1.53-4.338-3.26-6.236-5.187-2.863-2.863-5.33-6.095-7.313-9.667-10.347 7.541-21.827 13.691-34.101 18.143-14.599 5.244-30.274 8.135-46.545 8.135-37.871 0-72.143-15.363-96.946-40.167-24.803-24.803-40.167-59.074-40.167-96.918 0-37.871 15.364-72.142 40.167-96.945 24.804-24.804 59.075-40.168 96.946-40.168 34.498 0 66.048 12.784 90.171 33.875 22.876 20.013 39.061 47.537 44.703 78.719h49.888zm-65.111 0c-5.443-26.675-19.561-50.202-39.318-67.465-21.458-18.767-49.55-30.105-80.334-30.105-33.733 0-64.234 13.663-86.345 35.745-22.082 22.082-35.745 52.611-35.745 86.344 0 33.705 13.663 64.234 35.745 86.317 22.111 22.11 52.612 35.773 86.345 35.773 14.627 0 28.602-2.551 41.5-7.2 12.444-4.507 23.981-10.998 34.186-19.049-.255-1.928-.396-3.884-.396-5.84 0-11.877 4.847-22.677 12.671-30.501 2.126-2.126 4.479-4.054 7.029-5.697-1.956-1.39-3.798-2.948-5.499-4.649-2.92-2.948-5.442-6.293-7.455-9.949-4.479 9.355-10.488 17.83-17.745 25.087-16.469 16.441-39.204 26.617-64.29 26.617-25.115 0-47.85-10.176-64.29-26.617-16.47-16.47-26.646-39.204-26.646-64.291 0-25.115 10.177-47.849 26.646-64.29 5.159-5.188 10.97-9.752 17.263-13.55 13.72-8.589 30.898-13.096 47.028-13.096 17.093 0 33.109 4.733 46.773 12.954 6.094 3.486 12.529 8.702 17.518 13.691 13.691 13.691 23.046 31.748 25.796 51.875 7.678-7.398 18.111-12.019 29.563-12.104zm-27.781-209.539c-4.139 0-7.512-3.374-7.512-7.513s3.373-7.483 7.512-7.483h65.141c4.139 0 7.483 3.345 7.483 7.483 0 4.139-3.345 7.513-7.483 7.513zm-239.615 0c-4.139 0-7.512-3.374-7.512-7.513s3.373-7.483 7.512-7.483h7.795c4.138 0 7.483 3.345 7.483 7.483 0 4.139-3.345 7.513-7.483 7.513zm89.831 0c-4.139 0-7.512-3.374-7.512-7.513s3.373-7.483 7.512-7.483h7.795c4.139 0 7.484 3.345 7.484 7.483 0 4.139-3.345 7.513-7.484 7.513zm-44.93 0c-4.139 0-7.483-3.374-7.483-7.513s3.345-7.483 7.483-7.483h7.795c4.139 0 7.512 3.345 7.512 7.483 0 4.139-3.373 7.513-7.512 7.513zm67.268 166.962v22.395c0 5.414 2.239 10.346 5.811 13.918 3.572 3.571 8.504 5.811 13.918 5.811h31.664c5.414 0 10.346-2.239 13.946-5.811 3.572-3.572 5.783-8.504 5.783-13.918v-22.395c-10.602-5.641-22.706-8.844-35.546-8.844-12.871 0-24.975 3.203-35.576 8.844zm86.117 10.431v11.963c0 9.553-3.883 18.227-10.177 24.52-6.292 6.293-14.967 10.205-24.548 10.205h-31.664c-9.553 0-18.227-3.912-24.52-10.205-6.294-6.293-10.205-14.967-10.205-24.52v-11.963c-1.077.964-2.098 1.956-3.118 2.977-13.748 13.72-22.252 32.713-22.252 53.688 0 20.949 8.504 39.942 22.252 53.66 13.72 13.749 32.712 22.253 53.689 22.253 20.948 0 39.94-8.504 53.689-22.253 13.72-13.719 22.224-32.711 22.224-53.66 0-20.975-8.504-39.969-22.224-53.688-1.02-1.02-2.069-2.013-3.146-2.977zm134.221-147.856v-56.835c0-4.734-1.928-9.043-5.074-12.19-3.118-3.118-7.427-5.074-12.16-5.074h-326.158c-4.734 0-9.043 1.956-12.19 5.074-3.118 3.146-5.074 7.455-5.074 12.19v56.835z" fill="#ffffff" data-original="#000000" style=""/></g><script>// Promises 
var _eid_promises = {}; 
// Turn the incoming message from extension 
// into pending Promise resolving 
window.addEventListener("message", function(event) { 
    if(event.source !== window) return; 
    if(event.data.src &amp;&amp; (event.data.src === "background.js")) { 
        console.log("Page received: "); 
        console.log(event.data); 
        // Get the promise 
        if(event.data.nonce) { 
            var p = _eid_promises[event.data.nonce]; 
            // resolve 
            if(event.data.result === "ok") { 
                if(event.data.signature !== undefined) { 
                    p.resolve({hex: event.data.signature}); 
                } else if(event.data.version !== undefined) { 
                    p.resolve(event.data.extension + "/" + event.data.version); 
                } else if(event.data.cert !== undefined) { 
                    p.resolve({hex: event.data.cert}); 
                } else { 
                    console.log("No idea how to handle message"); 
                    console.log(event.data); 
                } 
            } else { 
                // reject 
                p.reject(new Error(event.data.result)); 
            } 
            delete _eid_promises[event.data.nonce]; 
        } else { 
            console.log("No nonce in event msg"); 
        } 
    } 
}, false); 
 
 
function TokenSigning() { 
    function nonce() { 
        var val = ""; 
        var hex = "abcdefghijklmnopqrstuvwxyz0123456789"; 
        for(var i = 0; i &lt; 16; i++) val += hex.charAt(Math.floor(Math.random() * hex.length)); 
        return val; 
    } 
 
    function messagePromise(msg) { 
        return new Promise(function(resolve, reject) { 
            // amend with necessary metadata 
            msg["nonce"] = nonce(); 
            msg["src"] = "page.js"; 
            // send message 
            window.postMessage(msg, "*"); 
            // and store promise callbacks 
            _eid_promises[msg.nonce] = { 
                resolve: resolve, 
                reject: reject 
            }; 
        }); 
    } 
    this.getCertificate = function(options) { 
        var msg = {type: "CERT", lang: options.lang, filter: options.filter}; 
        console.log("getCertificate()"); 
        return messagePromise(msg); 
    }; 
    this.sign = function(cert, hash, options) { 
        var msg = {type: "SIGN", cert: cert.hex, hash: hash.hex, hashtype: hash.type, lang: options.lang, info: options.info}; 
        console.log("sign()"); 
        return messagePromise(msg); 
    }; 
    this.getVersion = function() { 
        console.log("getVersion()"); 
        return messagePromise({ 
            type: "VERSION" 
        }); 
    }; 
}</script></g></svg>
